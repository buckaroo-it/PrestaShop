{"ast":null,"code":"import { ref } from 'vue';\nimport { useApi } from \"../../lib/api\";\nexport default {\n  name: \"GiftcardModal.vue\",\n  setup(props, {\n    emit\n  }) {\n    const showModal = ref(false);\n    const mode = ref(null);\n    const giftcard = ref(null);\n    const {\n      post,\n      data,\n      loading\n    } = useApi('giftcard/create');\n    const {\n      post: editGiftcardPost,\n      data: editGiftcardData\n    } = useApi('giftcard/edit');\n    const {\n      post: removeGiftcardPost,\n      data: removeGiftcardData\n    } = useApi('giftcard/remove');\n    const add = () => {\n      mode.value = 'add';\n      giftcard.value = {\n        name: null,\n        service_code: null,\n        logo_url: null\n      };\n      showModal.value = true;\n    };\n    const edit = editGiftcard => {\n      mode.value = 'edit';\n      giftcard.value = editGiftcard;\n      showModal.value = true;\n    };\n    const createGiftcard = () => {\n      if (giftcard.value.name && giftcard.value.service_code) {\n        post(giftcard.value).then(() => {\n          if (data.value.status) {\n            const giftcard = data.value.custom_giftcard;\n            giftcard.isCustom = true;\n            emit('appendCustomGiftcard', giftcard);\n            showModal.value = false;\n          }\n        });\n      }\n    };\n    const editGiftcard = () => {\n      if (giftcard.value.name && giftcard.value.service_code) {\n        editGiftcardPost(giftcard.value).then(() => {\n          if (editGiftcardData.value.status) {\n            showModal.value = false;\n          }\n        });\n      }\n    };\n    const removeGiftcard = () => {\n      removeGiftcardPost(giftcard.value).then(() => {\n        if (removeGiftcardData.value.status) {\n          emit('removeCustomGiftcard', giftcard.value);\n          showModal.value = false;\n        }\n      });\n    };\n    return {\n      add,\n      mode,\n      showModal,\n      giftcard,\n      loading,\n      createGiftcard,\n      edit,\n      editGiftcard,\n      removeGiftcard\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}