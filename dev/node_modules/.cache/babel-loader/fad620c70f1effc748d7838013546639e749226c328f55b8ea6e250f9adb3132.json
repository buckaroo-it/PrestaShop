{"ast":null,"code":"import { ref, computed } from \"vue\";\nimport { useApi } from \"../lib/api.ts\";\nimport CountrySelect from \"../components/CountrySelect.vue\";\nexport default {\n  name: \"PaymentMethods\",\n  components: {\n    CountrySelect\n  },\n  watch: {\n    selectCountry(value, oldValue) {\n      this.appendCountry(value);\n    }\n  },\n  setup() {\n    const verifications = ref([]);\n    const {\n      get,\n      data,\n      loading\n    } = useApi('payments');\n    const selectCountry = ref(null);\n    const countries = ref([]);\n    const countriesApi = useApi('countries');\n    const showAllCountries = ref(false);\n    get({\n      type: 'verification'\n    }).then(() => {\n      if (data.value.status) {\n        verifications.value = data.value.payments;\n      }\n    });\n    const addAllCountries = () => {\n      countriesApi.get().then(() => {\n        if (countriesApi.data.value.status) {\n          countriesApi.data.value.countries.forEach(country => {\n            appendCountry(country);\n          });\n        }\n      });\n    };\n    const appendCountry = country => {\n      if (!countries.value.find(c => c.id === country.id)) {\n        countries.value.push(country);\n      }\n    };\n    const removeCountry = country => {\n      countries.value = countries.value.filter(ec => ec.id !== country.id);\n    };\n    const removeAllCountries = () => {\n      countries.value = config_value.value ?? [];\n      countries.value = [];\n    };\n    const enabledCountries = computed(() => {\n      if (countries.value) {\n        if (countries.value.length > 10 && !showAllCountries.value) {\n          return countries.value.slice(0, 10);\n        }\n      }\n      return countries.value ?? [];\n    });\n    return {\n      verifications,\n      loading,\n      selectCountry,\n      addAllCountries,\n      appendCountry,\n      countries,\n      removeCountry,\n      removeAllCountries,\n      enabledCountries,\n      showAllCountries\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}